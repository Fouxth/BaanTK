# ЁЯОЙ BaanTK LINE Bot - р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤

## тЬЕ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Вр╣Йр╕▓р╕бр╕▓р╣Бр╕ер╣Йр╕з

### ЁЯФФ р╕гр╕░р╕Ър╕Ър╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

#### 1. р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕╡р╕Ы
- **р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕ер╕╡р╕Ы** тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕вр╕Юр╕гр╣Йр╕нр╕бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
- **р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕╡р╕Ы** тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╣Бр╕ер╕░р╣Гр╕лр╣Йр╕кр╣Ир╕Зр╣Гр╕лр╕бр╣И

#### 2. р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г
- **р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г** тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕вр╕Юр╕гр╣Йр╕нр╕бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕кр╕┤р╕Щр╣Ар╕Кр╕╖р╣Ир╕н
- **р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г** тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Ър╣Гр╕Ир╣Бр╕ер╕░р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│

### ЁЯУБ р╣Др╕Яр╕ер╣Мр╕Чр╕╡р╣Ир╕кр╕гр╣Йр╕▓р╕З/р╣Бр╕Бр╣Йр╣Др╕В

#### Functions Backend
- тЬЕ `functions/line-auto-reply.js` - р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ
- тЬЕ `functions/routes/slipApproval.js` - API р╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
- тЬЕ `functions/index.js` - р╣Ар╕Юр╕┤р╣Ир╕б API endpoints

#### Admin Frontend  
- тЬЕ `public/admin.html` - р╕Ыр╕гр╕▒р╕Ър╣Гр╕лр╣Йр╣Гр╕Кр╣Й API р╣Гр╕лр╕бр╣И

#### Testing & Documentation
- тЬЕ `test-notification-system.js` - р╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ъ
- тЬЕ `README_NOTIFICATION_UPDATE.md` - р╕Др╕╣р╣Ир╕бр╕╖р╕нр╣Гр╕лр╕бр╣И

### ЁЯФз API Endpoints р╣Гр╕лр╕бр╣И

#### POST `/api/admin/approve-slip`
р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕╡р╕Ы + р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

#### POST `/api/admin/approve-application`  
р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г + р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

### ЁЯУ▒ р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ

#### р╕кр╕ер╕╡р╕Ыр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
```
тЬЕ р╕кр╕ер╕╡р╕Ыр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
ЁЯОЙ р╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕в! р╕кр╕ер╕╡р╕Ыр╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╣Йр╕з

ЁЯТ░ р╕вр╕нр╕Фр╕Кр╕│р╕гр╕░: 5,000 р╕Ър╕▓р╕Ч  
ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣Ир╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤: 8/7/2568

[р╕Фр╕╣р╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░] [р╕Бр╕ер╕▒р╕Ър╣Ар╕бр╕Щр╕╣]
```

#### р╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕гр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤
```
ЁЯОЙ р╕Др╕│р╕Вр╕нр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤!
р╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕в р╕Др╕╕р╕Ур╕Чр╕Фр╕кр╕нр╕Ъ р╕гр╕░р╕Ър╕Ъ
р╕Др╕│р╕Вр╕нр╕кр╕┤р╕Щр╣Ар╕Кр╕╖р╣Ир╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╣Бр╕ер╣Йр╕з

ЁЯТ░ р╕зр╕Зр╣Ар╕Зр╕┤р╕Щ: 10,000 р╕Ър╕▓р╕Ч
ЁЯУЕ р╕Бр╕│р╕лр╕Щр╕Фр╕Кр╕│р╕гр╕░: 8/8/2568

[р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░] [р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Ар╕Ир╣Йр╕▓р╕лр╕Щр╣Йр╕▓р╕Чр╕╡р╣И]
```

### ЁЯЪА р╕Бр╕▓р╕г Deploy

```bash
cd /Users/pn/Desktop/Fouxth/BaanTK
firebase deploy --only functions
```

### тЬЕ р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Ьр╣Ир╕▓р╕Щр╣Бр╕ер╣Йр╕з

- тЬЕ Mock testing р╕Ьр╣Ир╕▓р╕Щ (node test-notification-system.js)
- тЬЕ API structure р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- тЬЕ Admin Panel integration р╕Юр╕гр╣Йр╕нр╕б
- тЬЕ LINE Flex Message format р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З

### ЁЯОп р╕зр╕┤р╕Шр╕╡р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

1. **р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╣Ар╕Вр╣Йр╕▓р╕лр╕Щр╣Йр╕▓ Admin Panel**
2. **р╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш** р╕кр╕ер╕╡р╕Ыр╕лр╕гр╕╖р╕нр╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г
3. **р╕гр╕░р╕Ър╕Ър╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е** р╣Бр╕ер╕░ **р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤**
4. **р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Др╕Фр╣Йр╕гр╕▒р╕Ър╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б LINE** р╕Чр╕▒р╕Щр╕Чр╕╡
5. **р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╣Ар╕лр╣Зр╕Щр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕кр╣Ир╕З** р╣Гр╕Щр╕лр╕Щр╣Йр╕▓ Admin

### ЁЯФо р╕Ир╕░р╣Ар╕Бр╕┤р╕Фр╕нр╕░р╣Др╕гр╕Вр╕╢р╣Йр╕Щр╕лр╕ер╕▒р╕З Deploy

#### р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕ер╕╡р╕Ы:
1. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Firestore status = 'approved' 
2. р╕кр╣Ир╕З LINE message р╣Др╕Ыр╕лр╕▓р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Вр╕Фр╕вр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
3. р╣Бр╕кр╕Фр╕Зр╕Ьр╕е "р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕ер╕┤р╕Ыр╕кр╕│р╣Ар╕гр╣Зр╕И р╣Бр╕ер╕░р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Бр╕ер╣Йр╕з"

#### р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕╡р╕Ы:
1. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Firestore status = 'rejected'
2. р╕кр╣Ир╕З LINE message р╣Бр╕Ир╣Йр╕Зр╣Ар╕лр╕Хр╕╕р╕Ьр╕ер╣Бр╕ер╕░р╣Гр╕лр╣Йр╕кр╣Ир╕Зр╣Гр╕лр╕бр╣И
3. р╣Бр╕кр╕Фр╕Зр╕Ьр╕е "р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕┤р╕Ыр╕кр╕│р╣Ар╕гр╣Зр╕И р╣Бр╕ер╕░р╕кр╣Ир╕Зр╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╣Бр╕ер╣Йр╕з"

### ЁЯОК р╕кр╕гр╕╕р╕Ы

**р╕Хр╕нр╕Ър╕Др╕│р╕Цр╕▓р╕б: "р╕Цр╣Йр╕▓р╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕Ир╕░р╕бр╕╡р╕Бр╕▓р╕гр╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕бр╕▓р╣Др╕лр╕б"**

**тЬЕ р╕бр╕╡! р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б LINE р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╕Чр╕▒р╕Щр╕Чр╕╡р╕Чр╕╡р╣Ир╣Бр╕нр╕Фр╕бр╕┤р╕Щр╕Бр╕Фр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤/р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш**

- тЬЕ р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕кр╕ер╕╡р╕Ы тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕в
- тЬЕ р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕кр╕ер╕╡р╕Ы тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╣Бр╕Ир╣Йр╕Зр╣Ар╕лр╕Хр╕╕р╕Ьр╕е  
- тЬЕ р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕вр╕┤р╕Щр╕Фр╕╡р╕Фр╣Йр╕зр╕вр╕Юр╕гр╣Йр╕нр╕бр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕кр╕┤р╕Щр╣Ар╕Кр╕╖р╣Ир╕н
- тЬЕ р╕Ыр╕Пр╕┤р╣Ар╕кр╕Шр╕Бр╕▓р╕гр╕кр╕бр╕▒р╕Др╕г тЖТ р╕кр╣Ир╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Ыр╕ер╕нр╕Ър╣Гр╕Ир╣Бр╕ер╕░р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│

**ЁЯЪА р╕Юр╕гр╣Йр╕нр╕б Deploy р╣Бр╕ер╕░р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╣Ар╕ер╕в!**
